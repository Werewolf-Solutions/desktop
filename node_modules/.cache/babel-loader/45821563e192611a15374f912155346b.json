{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/home/lorenzo/projects/werewolf-alpha/werewolf-desktop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/lorenzo/projects/werewolf-alpha/werewolf-desktop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/lorenzo/projects/werewolf-alpha/werewolf-desktop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/lorenzo/projects/werewolf-alpha/werewolf-desktop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/lorenzo/projects/werewolf-alpha/werewolf-desktop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{Grid,Button,TextField,Dialog,DialogActions,DialogContent,DialogContentText,DialogTitle,FormControl,InputLabel,Select,MenuItem,Checkbox,ListItemText,Input}from'@material-ui/core';import axios from'axios';var ITEM_HEIGHT=48;var ITEM_PADDING_TOP=8;var MenuProps={PaperProps:{style:{maxHeight:ITEM_HEIGHT*4.5+ITEM_PADDING_TOP,width:250}}};export default function ExchangeConnection(props){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var _React$useState3=React.useState(),_React$useState4=_slicedToArray(_React$useState3,2),state=_React$useState4[0],setState=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),exchanges=_React$useState6[0],setExchanges=_React$useState6[1];var handleChangeExchanges=function handleChangeExchanges(event){setExchanges(event.target.value);};var handleChange=function handleChange(e){setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},e.target.id,e.target.value)));};var handleClickOpen=function handleClickOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);};var addExchange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var name,api_sec,api_pub,exchange,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// TODO: add axios.post to write it on DB\nname=state.name,api_sec=state.api_sec,api_pub=state.api_pub;// TODO: handle multiple exchanges\nexchange={name:exchanges[0],api_sec:api_sec,api_pub:api_pub};_context.next=4;return axios.post('/users/add-exchange',exchange);case 4:res=_context.sent;console.log(res.data);props.authUser();handleClose();case 8:case\"end\":return _context.stop();}}},_callee);}));return function addExchange(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"primary\",onClick:handleClickOpen,children:\"Add exchange\"}),/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:handleClose,\"aria-labelledby\":\"form-dialog-title\",children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"form-dialog-title\",children:\"Add Exchange\"}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(DialogContentText,{children:\"Add your exchange api keys to connect your account.\"}),/*#__PURE__*/_jsxs(Grid,{container:true,children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsxs(FormControl,{children:[/*#__PURE__*/_jsx(InputLabel,{id:\"demo-mutiple-checkbox-label\",children:\"Exchanges\"}),/*#__PURE__*/_jsx(Select,{labelId:\"demo-mutiple-checkbox-label\",id:\"demo-mutiple-checkbox\",multiple:true,value:exchanges,onChange:handleChangeExchanges,input:/*#__PURE__*/_jsx(Input,{}),renderValue:function renderValue(selected){return selected.join(', ');},MenuProps:MenuProps,children:props.exchanges_available.map(function(exchange){return/*#__PURE__*/_jsxs(MenuItem,{value:exchange.name,children:[/*#__PURE__*/_jsx(Checkbox,{checked:exchanges.indexOf(exchange.name)>-1}),/*#__PURE__*/_jsx(ListItemText,{primary:exchange.name})]},exchange.name);})})]})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(TextField,{autoFocus:true,margin:\"dense\",id:\"api_sec\",label:\"api_sec\",onChange:handleChange})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(TextField,{autoFocus:true,margin:\"dense\",id:\"api_pub\",label:\"api_pub\",onChange:handleChange})})]})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleClose,color:\"primary\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:addExchange,color:\"primary\",children:\"Confirm\"})]})]})]});}","map":{"version":3,"sources":["/home/lorenzo/projects/werewolf-alpha/werewolf-desktop/src/Components/Investments/ExchangeConnection.js"],"names":["React","Grid","Button","TextField","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","FormControl","InputLabel","Select","MenuItem","Checkbox","ListItemText","Input","axios","ITEM_HEIGHT","ITEM_PADDING_TOP","MenuProps","PaperProps","style","maxHeight","width","ExchangeConnection","props","useState","open","setOpen","state","setState","exchanges","setExchanges","handleChangeExchanges","event","target","value","handleChange","e","id","handleClickOpen","handleClose","addExchange","name","api_sec","api_pub","exchange","post","res","console","log","data","authUser","selected","join","exchanges_available","map","indexOf"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n    Grid,\n    Button,\n    TextField,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogContentText,\n    DialogTitle,\n    FormControl,\n    InputLabel,\n    Select,\n    MenuItem,\n    Checkbox,\n    ListItemText,\n    Input\n} from '@material-ui/core';\nimport axios from 'axios';\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n    PaperProps: {\n        style: {\n        maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n        width: 250,\n        },\n    },\n};\n\nexport default function ExchangeConnection(props) {\n    const [open, setOpen] = React.useState(false);\n    const [state, setState] = React.useState();\n    const [exchanges, setExchanges] = React.useState([]);\n\n    const handleChangeExchanges = (event) => {\n        setExchanges(event.target.value);\n    };\n\n    const handleChange = (e) => {\n        setState({...state, [e.target.id]: e.target.value});\n    }\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const addExchange = async () => {\n        // TODO: add axios.post to write it on DB\n        const { name, api_sec, api_pub } = state;\n        // TODO: handle multiple exchanges\n        let exchange = {\n            name: exchanges[0],\n            api_sec,\n            api_pub\n        }\n        const res = await axios.post('/users/add-exchange', exchange);\n        console.log(res.data);\n        props.authUser();\n        handleClose();\n    }\n\n    return (\n        <div>\n            <Button variant=\"outlined\" color=\"primary\" onClick={handleClickOpen}>\n                Add exchange\n            </Button>\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                <DialogTitle id=\"form-dialog-title\">Add Exchange</DialogTitle>\n                <DialogContent>\n                    <DialogContentText>\n                        Add your exchange api keys to connect your account.\n                    </DialogContentText>\n                    <Grid container>\n                        <Grid item>\n                        <FormControl>\n                            <InputLabel id=\"demo-mutiple-checkbox-label\">Exchanges</InputLabel>\n                            <Select\n                                labelId=\"demo-mutiple-checkbox-label\"\n                                id=\"demo-mutiple-checkbox\"\n                                multiple\n                                value={exchanges}\n                                onChange={handleChangeExchanges}\n                                input={<Input />}\n                                renderValue={(selected) => selected.join(', ')}\n                                MenuProps={MenuProps}\n                            >\n                            {props.exchanges_available.map((exchange) => (\n                                <MenuItem key={exchange.name} value={exchange.name}>\n                                <Checkbox checked={exchanges.indexOf(exchange.name) > -1} />\n                                <ListItemText primary={exchange.name} />\n                                </MenuItem>\n                            ))}\n                            </Select>\n                        </FormControl>\n                        </Grid>\n                        <Grid item>\n                            <TextField\n                                autoFocus\n                                margin=\"dense\"\n                                id=\"api_sec\"\n                                label=\"api_sec\"\n                                onChange={handleChange}\n                            />\n                        </Grid>\n                        <Grid item>\n                            <TextField\n                                autoFocus\n                                margin=\"dense\"\n                                id=\"api_pub\"\n                                label=\"api_pub\"\n                                onChange={handleChange}\n                            />\n                        </Grid>\n                    </Grid>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={handleClose} color=\"primary\">\n                        Cancel\n                    </Button>\n                    <Button onClick={addExchange} color=\"primary\">\n                        Confirm\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}