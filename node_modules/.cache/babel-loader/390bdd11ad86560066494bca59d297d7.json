{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _toConsumableArray from\"/home/lorenzo/projects/werewolf-alpha/werewolf-desktop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/lorenzo/projects/werewolf-alpha/werewolf-desktop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/lorenzo/projects/werewolf-alpha/werewolf-desktop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/lorenzo/projects/werewolf-alpha/werewolf-desktop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/lorenzo/projects/werewolf-alpha/werewolf-desktop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/lorenzo/projects/werewolf-alpha/werewolf-desktop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{makeStyles}from'@material-ui/core/styles';import{Grid,InputLabel,MenuItem,Select,FormControl,Button,Typography}from'@material-ui/core';import{format,compareAsc}from'date-fns';import AddBudgetDialog from'./AddBudgetDialog';import FixedCostsDialog from'./FixedCosts/FixedCostsDialog';import VariableCostsDialog from'./VariableCosts/VariableCostsDialog';import FutureCostsDialog from'./FutureCosts/FutureCostsDialog';import IncomesDialog from'./Incomes/IncomesDialog';import BankAccountsDialog from'./BankAccounts/BankAccountsDialog';import CheckboxesForm from'../Layout/CheckboxesForm';import accounting from'../../funcs/accounting';import CheckBoxGridList from'../Layout/CheckBoxGridList';var useStyles=makeStyles(function(theme){return{formControl:{margin:theme.spacing(1),minWidth:120}};});export default function Accounting(props){var user=props.user;var classes=useStyles();var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),addBudgetDialog=_React$useState2[0],setAddBudgetDialog=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),fixedCostsDialog=_React$useState4[0],setFixedCostsDialog=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),variableCostsDialog=_React$useState6[0],setVariableCostsDialog=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),futureCostsDialog=_React$useState8[0],setFutureCostsDialog=_React$useState8[1];var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),incomesDialog=_React$useState10[0],setIncomesDialog=_React$useState10[1];var _React$useState11=React.useState(false),_React$useState12=_slicedToArray(_React$useState11,2),bankAccountsDialog=_React$useState12[0],setBankAccountsDialog=_React$useState12[1];var _React$useState13=React.useState(),_React$useState14=_slicedToArray(_React$useState13,2),state=_React$useState14[0],setState=_React$useState14[1];var _React$useState15=React.useState(false),_React$useState16=_slicedToArray(_React$useState15,2),addFixedCostDialog=_React$useState16[0],setAddFixedCostDialog=_React$useState16[1];var _React$useState17=React.useState(false),_React$useState18=_slicedToArray(_React$useState17,2),addVariableCostDialog=_React$useState18[0],setAddVariableCostDialog=_React$useState18[1];var _React$useState19=React.useState(false),_React$useState20=_slicedToArray(_React$useState19,2),addFutureCostDialog=_React$useState20[0],setAddFutureCostDialog=_React$useState20[1];var _React$useState21=React.useState(false),_React$useState22=_slicedToArray(_React$useState21,2),addIncomeDialog=_React$useState22[0],setAddIncomeDialog=_React$useState22[1];var _React$useState23=React.useState(false),_React$useState24=_slicedToArray(_React$useState23,2),addBankAccountDialog=_React$useState24[0],setAddBankAccountDialog=_React$useState24[1];var _React$useState25=React.useState(format(new Date(),'yyyy-MM-dd')),_React$useState26=_slicedToArray(_React$useState25,2),date=_React$useState26[0],setDate=_React$useState26[1];var _React$useState27=React.useState(props.budget.working_days),_React$useState28=_slicedToArray(_React$useState27,2),workingDays=_React$useState28[0],setWorkingDays=_React$useState28[1];var _React$useState29=React.useState(props.budget?props.budget.name:''),_React$useState30=_slicedToArray(_React$useState29,2),budgetName=_React$useState30[0],setBudgetName=_React$useState30[1];// Handle budget selection\nvar handleSelectBudget=function handleSelectBudget(e){// props.setBudget(e.target.value)\n// console.log(e.target.value.name)\n// setBudgetName(e.target.value.name)\nprops.update(e.target.value);};var selectDate=function selectDate(e){setDate(e.target.value);};var handleAddFixedCostDialog=function handleAddFixedCostDialog(){setAddFixedCostDialog(!addFixedCostDialog);};var handleAddVariableCostDialog=function handleAddVariableCostDialog(){setAddVariableCostDialog(!addVariableCostDialog);};var handleAddFutureCostDialog=function handleAddFutureCostDialog(){setAddFutureCostDialog(!addFutureCostDialog);};var handleAddIncomeDialog=function handleAddIncomeDialog(){setAddIncomeDialog(!addIncomeDialog);};var handleAddBankAccountDialog=function handleAddBankAccountDialog(){setAddBankAccountDialog(!addBankAccountDialog);};var handleChange=function handleChange(e){setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},e.target.id,e.target.value)));};var handleAddBudgetDialog=function handleAddBudgetDialog(){setAddBudgetDialog(!addBudgetDialog);};var handleFixedCostsDialog=function handleFixedCostsDialog(){setFixedCostsDialog(!fixedCostsDialog);};var handleVariableCostsDialog=function handleVariableCostsDialog(){setVariableCostsDialog(!variableCostsDialog);};var handleFutureCostsDialog=function handleFutureCostsDialog(){setFutureCostsDialog(!futureCostsDialog);};var handleIncomesDialog=function handleIncomesDialog(){setIncomesDialog(!incomesDialog);};var handleBankAccountsDialog=function handleBankAccountsDialog(){setBankAccountsDialog(!bankAccountsDialog);};var addBudget=function addBudget(){var _accounting$addBudget=accounting.addBudget(state.name).then(function(){props.authUser();handleAddBudgetDialog();}),budgets=_accounting$addBudget.budgets,success=_accounting$addBudget.success;};var deleteBudget=function deleteBudget(){var _accounting$deleteBud=accounting.deleteBudget(props.budget._id).then(function(){props.update(user.budgets[0]);}),budgets=_accounting$deleteBud.budgets,success=_accounting$deleteBud.success;};var addFixedCost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var due_day,amount,from,to,frequency,notes,fixed_cost;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:due_day=state.due_day,amount=state.amount,from=state.from,to=state.to,frequency=state.frequency,notes=state.notes;fixed_cost={due_day:due_day,amount:amount,from:from,to:to,frequency:frequency,notes:notes};_context.next=4;return accounting.addFixedCost(props.budget,fixed_cost);case 4:props.update(props.budget);handleAddFixedCostDialog();case 6:case\"end\":return _context.stop();}}},_callee);}));return function addFixedCost(){return _ref.apply(this,arguments);};}();var deleteFixedCost=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(fixed_cost_id){var i;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:i=0;case 1:if(!(i<fixed_cost_id.length)){_context2.next=8;break;}_context2.next=4;return accounting.deleteFixedCost(props.budget,fixed_cost_id[i]);case 4:props.update(props.budget);case 5:i++;_context2.next=1;break;case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function deleteFixedCost(_x){return _ref2.apply(this,arguments);};}();var addVariableCost=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var amount,from,to,notes,label,variable_cost;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:amount=state.amount,from=state.from,to=state.to,notes=state.notes,label=state.label;variable_cost={date:date,amount:amount,from:from,to:to,notes:notes,label:label};_context3.next=4;return accounting.addVariableCost(props.budget,variable_cost);case 4:props.update(props.budget);handleAddVariableCostDialog();case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function addVariableCost(){return _ref3.apply(this,arguments);};}();var deleteVariableCost=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(variable_cost_id){var i;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:i=0;case 1:if(!(i<variable_cost_id.length)){_context4.next=8;break;}_context4.next=4;return accounting.deleteVariableCost(props.budget,variable_cost_id[i]);case 4:props.update(props.budget);case 5:i++;_context4.next=1;break;case 8:case\"end\":return _context4.stop();}}},_callee4);}));return function deleteVariableCost(_x2){return _ref4.apply(this,arguments);};}();var addFutureCost=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var amount,from,to,notes,label,future_cost;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:amount=state.amount,from=state.from,to=state.to,notes=state.notes,label=state.label;future_cost={date:date,amount:amount,from:from,to:to,notes:notes,label:label};_context5.next=4;return accounting.addFutureCost(props.budget,future_cost);case 4:props.update(props.budget);handleAddFutureCostDialog();case 6:case\"end\":return _context5.stop();}}},_callee5);}));return function addFutureCost(){return _ref5.apply(this,arguments);};}();var deleteFutureCost=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(future_cost_id){var i;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:i=0;case 1:if(!(i<future_cost_id.length)){_context6.next=8;break;}_context6.next=4;return accounting.deleteFutureCost(props.budget,future_cost_id[i]);case 4:props.update(props.budget);case 5:i++;_context6.next=1;break;case 8:case\"end\":return _context6.stop();}}},_callee6);}));return function deleteFutureCost(_x3){return _ref6.apply(this,arguments);};}();var addIncome=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var amount,from,to,notes,income;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:amount=state.amount,from=state.from,to=state.to,notes=state.notes;income={date:date,amount:amount,from:from,to:to,notes:notes};_context7.next=4;return accounting.addIncome(props.budget,income);case 4:props.update(props.budget);handleAddIncomeDialog();case 6:case\"end\":return _context7.stop();}}},_callee7);}));return function addIncome(){return _ref7.apply(this,arguments);};}();var deleteIncome=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(income_id){var i;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:i=0;case 1:if(!(i<income_id.length)){_context8.next=8;break;}_context8.next=4;return accounting.deleteIncome(props.budget,income_id[i]);case 4:props.update(props.budget);case 5:i++;_context8.next=1;break;case 8:case\"end\":return _context8.stop();}}},_callee8);}));return function deleteIncome(_x4){return _ref8.apply(this,arguments);};}();var addBankAccount=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var amount,from,bank_name,notes,bank_account;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:amount=state.amount,from=state.from,bank_name=state.bank_name,notes=state.notes;bank_account={date:date,amount:amount,from:from,bank_name:bank_name,notes:notes};_context9.next=4;return accounting.addBankAccount(props.budget,bank_account);case 4:props.update(props.budget);handleAddBankAccountDialog();case 6:case\"end\":return _context9.stop();}}},_callee9);}));return function addBankAccount(){return _ref9.apply(this,arguments);};}();var deleteBankAccount=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(bank_account_id){var i;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:i=0;case 1:if(!(i<bank_account_id.length)){_context10.next=8;break;}_context10.next=4;return accounting.deleteBankAccount(props.budget,bank_account_id[i]);case 4:props.update(props.budget);case 5:i++;_context10.next=1;break;case 8:case\"end\":return _context10.stop();}}},_callee10);}));return function deleteBankAccount(_x5){return _ref10.apply(this,arguments);};}();// select working_days from grid list\nvar handleSelect=function handleSelect(value){return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){var currentIndex,newWorkingDays,working_days;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:currentIndex=workingDays.indexOf(value);newWorkingDays=_toConsumableArray(workingDays);if(currentIndex===-1){newWorkingDays.push(value);}else{newWorkingDays.splice(currentIndex,1);}setWorkingDays(newWorkingDays);working_days=newWorkingDays;_context11.next=7;return accounting.editBudget(props.budget,working_days);case 7:props.update(props.budget);case 8:case\"end\":return _context11.stop();}}},_callee11);}));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(AddBudgetDialog,{open:addBudgetDialog,handleChange:handleChange,addBudget:addBudget,onClose:handleAddBudgetDialog}),/*#__PURE__*/_jsx(FixedCostsDialog,{open:fixedCostsDialog,onClose:handleFixedCostsDialog,budget:props.budget,addFixedCost:addFixedCost,handleChange:handleChange,authUser:props.authUser,addFixedCostDialog:addFixedCostDialog,handleAddFixedCostDialog:handleAddFixedCostDialog,deleteFixedCost:deleteFixedCost}),/*#__PURE__*/_jsx(VariableCostsDialog,{open:variableCostsDialog,onClose:handleVariableCostsDialog,budget:props.budget,addVariableCost:addVariableCost,handleChange:handleChange,authUser:props.authUser,addVariableCostDialog:addVariableCostDialog,handleAddVariableCostDialog:handleAddVariableCostDialog,deleteVariableCost:deleteVariableCost,date:date,selectDate:selectDate}),/*#__PURE__*/_jsx(FutureCostsDialog,{open:futureCostsDialog,onClose:handleFutureCostsDialog,budget:props.budget,addFutureCost:addFutureCost,handleChange:handleChange,authUser:props.authUser,addFutureCostDialog:addFutureCostDialog,handleAddFutureCostDialog:handleAddFutureCostDialog,deleteFutureCost:deleteFutureCost,date:date,selectDate:selectDate}),/*#__PURE__*/_jsx(IncomesDialog,{open:incomesDialog,onClose:handleIncomesDialog,budget:props.budget,addIncome:addIncome,handleChange:handleChange,authUser:props.authUser,addIncomeDialog:addIncomeDialog,handleAddIncomeDialog:handleAddIncomeDialog,deleteIncome:deleteIncome,date:date,selectDate:selectDate}),/*#__PURE__*/_jsx(BankAccountsDialog,{open:bankAccountsDialog,onClose:handleBankAccountsDialog,budget:props.budget,addBankAccount:addBankAccount,handleChange:handleChange,authUser:props.authUser,addBankAccountDialog:addBankAccountDialog,handleAddBankAccountDialog:handleAddBankAccountDialog,deleteBankAccount:deleteBankAccount,date:date,selectDate:selectDate}),user?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Grid,{container:true,direction:\"column\",children:[/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsxs(FormControl,{className:classes.formControl,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Budget\"}),/*#__PURE__*/_jsx(Select,{id:\"select-budget\",value:budgetName,onChange:handleSelectBudget,children:user.budgets.map(function(budget){return/*#__PURE__*/_jsx(MenuItem,{value:budget,children:budget.name},budget._id);})})]}),/*#__PURE__*/_jsx(Button,{onClick:handleAddBudgetDialog,children:\"Add a budget\"}),props.budget?/*#__PURE__*/_jsxs(\"div\",{children:[props.budget.name,/*#__PURE__*/_jsx(Button,{onClick:deleteBudget,children:\"Delete\"})]}):null]}),/*#__PURE__*/_jsx(Grid,{item:true,children:props.budget?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CheckBoxGridList,{data:['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday'],checked:props.budget.working_days,handleSelect:handleSelect})}):null}),/*#__PURE__*/_jsx(Grid,{item:true,container:true,direction:\"column\",children:props.budget?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Grid,{item:true,container:true,spacing:1,direction:\"column\",children:[/*#__PURE__*/_jsxs(Grid,{item:true,container:true,spacing:1,children:[/*#__PURE__*/_jsxs(Grid,{item:true,children:[\"To earn: \",props.budget.to_earn]}),/*#__PURE__*/_jsxs(Grid,{item:true,children:[\"To save: \",props.budget.to_save]}),/*#__PURE__*/_jsxs(Grid,{item:true,children:[\"Net worth: \",props.budget.net_worth]}),/*#__PURE__*/_jsxs(Grid,{item:true,children:[\"APY: \",props.budget.APY]}),/*#__PURE__*/_jsxs(Grid,{item:true,children:[\"spendable: \",props.budget.spendable]}),/*#__PURE__*/_jsxs(Grid,{item:true,children:[\"goal: \",props.budget.goal]})]}),/*#__PURE__*/_jsxs(Grid,{item:true,container:true,spacing:1,children:[/*#__PURE__*/_jsxs(Grid,{item:true,children:[\"Net worth needed: \",props.budget.net_worth_needed]}),/*#__PURE__*/_jsxs(Grid,{item:true,children:[\"Net worth missing: \",props.budget.net_worth_missing]}),/*#__PURE__*/_jsxs(Grid,{item:true,children:[\"Time: \",props.budget.time]})]})]}),/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsxs(Button,{onClick:handleFixedCostsDialog,children:[\"Fixed Costs \",props.budget.tot_fixed_costs]}),/*#__PURE__*/_jsxs(Button,{onClick:handleVariableCostsDialog,children:[\"Variable Costs \",props.budget.tot_variable_costs]}),/*#__PURE__*/_jsxs(Button,{onClick:handleFutureCostsDialog,children:[\"Future Costs \",props.budget.tot_future_costs]}),/*#__PURE__*/_jsxs(Button,{onClick:handleIncomesDialog,children:[\"Incomes \",props.budget.tot_incomes]}),/*#__PURE__*/_jsxs(Button,{onClick:handleBankAccountsDialog,children:[\"Bank accounts \",props.budget.tot_bank_accounts]})]})]}):/*#__PURE__*/_jsx(\"div\",{children:\"Select a budget to see details\"})})]})}):/*#__PURE__*/_jsx(\"div\",{children:\"Loading . . .\"})]});}","map":{"version":3,"sources":["/home/lorenzo/projects/werewolf-alpha/werewolf-desktop/src/Components/Accounting/Accounting.js"],"names":["React","makeStyles","Grid","InputLabel","MenuItem","Select","FormControl","Button","Typography","format","compareAsc","AddBudgetDialog","FixedCostsDialog","VariableCostsDialog","FutureCostsDialog","IncomesDialog","BankAccountsDialog","CheckboxesForm","accounting","CheckBoxGridList","useStyles","theme","formControl","margin","spacing","minWidth","Accounting","props","user","classes","useState","addBudgetDialog","setAddBudgetDialog","fixedCostsDialog","setFixedCostsDialog","variableCostsDialog","setVariableCostsDialog","futureCostsDialog","setFutureCostsDialog","incomesDialog","setIncomesDialog","bankAccountsDialog","setBankAccountsDialog","state","setState","addFixedCostDialog","setAddFixedCostDialog","addVariableCostDialog","setAddVariableCostDialog","addFutureCostDialog","setAddFutureCostDialog","addIncomeDialog","setAddIncomeDialog","addBankAccountDialog","setAddBankAccountDialog","Date","date","setDate","budget","working_days","workingDays","setWorkingDays","name","budgetName","setBudgetName","handleSelectBudget","e","update","target","value","selectDate","handleAddFixedCostDialog","handleAddVariableCostDialog","handleAddFutureCostDialog","handleAddIncomeDialog","handleAddBankAccountDialog","handleChange","id","handleAddBudgetDialog","handleFixedCostsDialog","handleVariableCostsDialog","handleFutureCostsDialog","handleIncomesDialog","handleBankAccountsDialog","addBudget","then","authUser","budgets","success","deleteBudget","_id","addFixedCost","due_day","amount","from","to","frequency","notes","fixed_cost","deleteFixedCost","fixed_cost_id","i","length","addVariableCost","label","variable_cost","deleteVariableCost","variable_cost_id","addFutureCost","future_cost","deleteFutureCost","future_cost_id","addIncome","income","deleteIncome","income_id","addBankAccount","bank_name","bank_account","deleteBankAccount","bank_account_id","handleSelect","currentIndex","indexOf","newWorkingDays","push","splice","editBudget","map","to_earn","to_save","net_worth","APY","spendable","goal","net_worth_needed","net_worth_missing","time","tot_fixed_costs","tot_variable_costs","tot_future_costs","tot_incomes","tot_bank_accounts"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport {\n    Grid,\n    InputLabel,\n    MenuItem,\n    Select,\n    FormControl,\n    Button,\n    Typography\n} from '@material-ui/core'\nimport { format, compareAsc } from 'date-fns'\n\nimport AddBudgetDialog from './AddBudgetDialog'\nimport FixedCostsDialog from './FixedCosts/FixedCostsDialog'\nimport VariableCostsDialog from './VariableCosts/VariableCostsDialog'\nimport FutureCostsDialog from './FutureCosts/FutureCostsDialog'\nimport IncomesDialog from './Incomes/IncomesDialog'\nimport BankAccountsDialog from './BankAccounts/BankAccountsDialog'\nimport CheckboxesForm from '../Layout/CheckboxesForm'\n\nimport accounting from '../../funcs/accounting'\nimport CheckBoxGridList from '../Layout/CheckBoxGridList'\n\nconst useStyles = makeStyles((theme) => ({\n    formControl: {\n        margin: theme.spacing(1),\n        minWidth: 120\n    }\n}))\n\nexport default function Accounting(props) {\n    const { user } = props\n\n    const classes = useStyles()\n    const [addBudgetDialog, setAddBudgetDialog] = React.useState(false)\n    const [fixedCostsDialog, setFixedCostsDialog] = React.useState(false)\n    const [variableCostsDialog, setVariableCostsDialog] = React.useState(false)\n    const [futureCostsDialog, setFutureCostsDialog] = React.useState(false)\n    const [incomesDialog, setIncomesDialog] = React.useState(false)\n    const [bankAccountsDialog, setBankAccountsDialog] = React.useState(false)\n    const [state, setState] = React.useState()\n    const [addFixedCostDialog, setAddFixedCostDialog] = React.useState(false)\n    const [addVariableCostDialog, setAddVariableCostDialog] = React.useState(false)\n    const [addFutureCostDialog, setAddFutureCostDialog] = React.useState(false)\n    const [addIncomeDialog, setAddIncomeDialog] = React.useState(false)\n    const [addBankAccountDialog, setAddBankAccountDialog] = React.useState(false)\n    const [date, setDate] = React.useState(format(new Date(), 'yyyy-MM-dd'))\n    const [workingDays, setWorkingDays] = React.useState(props.budget.working_days)\n    const [budgetName, setBudgetName] = React.useState(props.budget ? props.budget.name : '')\n\n    // Handle budget selection\n    const handleSelectBudget = (e) => {\n        // props.setBudget(e.target.value)\n        // console.log(e.target.value.name)\n        // setBudgetName(e.target.value.name)\n        props.update(e.target.value)\n    }\n\n    const selectDate = (e) => {\n        setDate(e.target.value)\n    }\n\n    const handleAddFixedCostDialog = () => {\n        setAddFixedCostDialog(!addFixedCostDialog)\n    }\n\n    const handleAddVariableCostDialog = () => {\n        setAddVariableCostDialog(!addVariableCostDialog)\n    }\n\n    const handleAddFutureCostDialog = () => {\n        setAddFutureCostDialog(!addFutureCostDialog)\n    }\n\n    const handleAddIncomeDialog = () => {\n        setAddIncomeDialog(!addIncomeDialog)\n    }\n\n    const handleAddBankAccountDialog = () => {\n        setAddBankAccountDialog(!addBankAccountDialog)\n    }\n\n    const handleChange = (e) => {\n        setState({...state, [e.target.id]: e.target.value})\n    } \n\n    const handleAddBudgetDialog = () => {\n        setAddBudgetDialog(!addBudgetDialog)\n    }\n\n    const handleFixedCostsDialog = () => {\n        setFixedCostsDialog(!fixedCostsDialog)\n    }\n\n    const handleVariableCostsDialog = () => {\n        setVariableCostsDialog(!variableCostsDialog)\n    }\n\n    const handleFutureCostsDialog = () => {\n        setFutureCostsDialog(!futureCostsDialog)\n    }\n\n    const handleIncomesDialog = () => {\n        setIncomesDialog(!incomesDialog)\n    }\n\n    const handleBankAccountsDialog = () => {\n        setBankAccountsDialog(!bankAccountsDialog)\n    }\n\n    const addBudget = () => {\n        let { budgets, success } = accounting.addBudget(state.name).then(() => {\n            props.authUser()\n            handleAddBudgetDialog()\n        })\n    }\n\n    const deleteBudget = () => {\n        let { budgets, success } = accounting.deleteBudget(props.budget._id).then(() => {\n            props.update(user.budgets[0])\n        })\n    }\n\n    const addFixedCost = async () => {\n        const {\n            due_day,\n            amount,\n            from,\n            to,\n            frequency,\n            notes\n        } = state\n        let fixed_cost = {\n            due_day,\n            amount,\n            from,\n            to,\n            frequency,\n            notes\n        }\n        await accounting.addFixedCost(props.budget, fixed_cost)\n        props.update(props.budget)\n        handleAddFixedCostDialog()\n    }\n\n    const deleteFixedCost = async (fixed_cost_id) => {\n        for (let i = 0; i < fixed_cost_id.length; i++) {\n            await accounting.deleteFixedCost(props.budget, fixed_cost_id[i])\n            props.update(props.budget)\n        }\n    }\n\n    const addVariableCost = async () => {\n        const {\n            amount,\n            from,\n            to,\n            notes,\n            label\n        } = state\n        let variable_cost = {\n            date: date,\n            amount,\n            from,\n            to,\n            notes,\n            label\n        }\n        await accounting.addVariableCost(props.budget, variable_cost)\n        props.update(props.budget)\n        handleAddVariableCostDialog()\n    }\n\n    const deleteVariableCost = async (variable_cost_id) => {\n        for (let i = 0; i < variable_cost_id.length; i++) {\n            await accounting.deleteVariableCost(props.budget, variable_cost_id[i])\n            props.update(props.budget)\n        }\n    }\n\n    const addFutureCost = async () => {\n        const {\n            amount,\n            from,\n            to,\n            notes,\n            label\n        } = state\n        let future_cost = {\n            date: date,\n            amount,\n            from,\n            to,\n            notes,\n            label\n        }\n        await accounting.addFutureCost(props.budget, future_cost)\n        props.update(props.budget)\n        handleAddFutureCostDialog()\n    }\n\n    const deleteFutureCost = async (future_cost_id) => {\n        for (let i = 0; i < future_cost_id.length; i++) {\n            await accounting.deleteFutureCost(props.budget, future_cost_id[i])\n            props.update(props.budget)\n        }\n    }\n\n    const addIncome = async () => {\n        const {\n            amount,\n            from,\n            to,\n            notes\n        } = state\n        let income = {\n            date: date,\n            amount,\n            from,\n            to,\n            notes\n        }\n        await accounting.addIncome(props.budget, income)\n        props.update(props.budget)\n        handleAddIncomeDialog()\n    }\n\n    const deleteIncome = async (income_id) => {\n        for (let i = 0; i < income_id.length; i++) {\n            await accounting.deleteIncome(props.budget, income_id[i])\n            props.update(props.budget)\n        }\n    }\n\n    const addBankAccount = async () => {\n        const {\n            amount,\n            from,\n            bank_name,\n            notes\n        } = state\n        let bank_account = {\n            date: date,\n            amount,\n            from,\n            bank_name,\n            notes\n        }\n        await accounting.addBankAccount(props.budget, bank_account)\n        props.update(props.budget)\n        handleAddBankAccountDialog()\n    }\n\n    const deleteBankAccount = async (bank_account_id) => {\n        for (let i = 0; i < bank_account_id.length; i++) {\n            await accounting.deleteBankAccount(props.budget, bank_account_id[i])\n            props.update(props.budget)\n        }\n    }\n\n    // select working_days from grid list\n    const handleSelect = (value) => async () => {\n        const currentIndex = workingDays.indexOf(value)\n        const newWorkingDays = [...workingDays]\n\n        if (currentIndex === -1) {\n            newWorkingDays.push(value)\n        } else {\n            newWorkingDays.splice(currentIndex, 1)\n        }\n        setWorkingDays(newWorkingDays)\n        let working_days = newWorkingDays\n        await accounting.editBudget(props.budget, working_days)\n        props.update(props.budget)\n    }\n\n    return (\n        <div>\n            <AddBudgetDialog\n                open={addBudgetDialog}\n                handleChange={handleChange}\n                addBudget={addBudget}\n                onClose={handleAddBudgetDialog}\n            />\n            <FixedCostsDialog\n                open={fixedCostsDialog}\n                onClose={handleFixedCostsDialog}\n                budget={props.budget}\n                addFixedCost={addFixedCost}\n                handleChange={handleChange}\n                authUser={props.authUser}\n                addFixedCostDialog={addFixedCostDialog}\n                handleAddFixedCostDialog={handleAddFixedCostDialog}\n                deleteFixedCost={deleteFixedCost}\n            />\n            <VariableCostsDialog\n                open={variableCostsDialog}\n                onClose={handleVariableCostsDialog}\n                budget={props.budget}\n                addVariableCost={addVariableCost}\n                handleChange={handleChange}\n                authUser={props.authUser}\n                addVariableCostDialog={addVariableCostDialog}\n                handleAddVariableCostDialog={handleAddVariableCostDialog}\n                deleteVariableCost={deleteVariableCost}\n                date={date}\n                selectDate={selectDate}\n            />\n            <FutureCostsDialog\n                open={futureCostsDialog}\n                onClose={handleFutureCostsDialog}\n                budget={props.budget}\n                addFutureCost={addFutureCost}\n                handleChange={handleChange}\n                authUser={props.authUser}\n                addFutureCostDialog={addFutureCostDialog}\n                handleAddFutureCostDialog={handleAddFutureCostDialog}\n                deleteFutureCost={deleteFutureCost}\n                date={date}\n                selectDate={selectDate}\n            />\n            <IncomesDialog\n                open={incomesDialog}\n                onClose={handleIncomesDialog}\n                budget={props.budget}\n                addIncome={addIncome}\n                handleChange={handleChange}\n                authUser={props.authUser}\n                addIncomeDialog={addIncomeDialog}\n                handleAddIncomeDialog={handleAddIncomeDialog}\n                deleteIncome={deleteIncome}\n                date={date}\n                selectDate={selectDate}\n            />\n            <BankAccountsDialog\n                open={bankAccountsDialog}\n                onClose={handleBankAccountsDialog}\n                budget={props.budget}\n                addBankAccount={addBankAccount}\n                handleChange={handleChange}\n                authUser={props.authUser}\n                addBankAccountDialog={addBankAccountDialog}\n                handleAddBankAccountDialog={handleAddBankAccountDialog}\n                deleteBankAccount={deleteBankAccount}\n                date={date}\n                selectDate={selectDate}\n            />\n            {user\n            ? (<div>\n                <Grid container direction=\"column\">\n                    <Grid item>\n                        <FormControl className={classes.formControl}>\n                            <InputLabel>Budget</InputLabel>\n                            <Select\n                                id=\"select-budget\"\n                                value={budgetName}\n                                onChange={handleSelectBudget}\n                            >\n                                {user.budgets.map((budget) => (\n                                    <MenuItem key={budget._id} value={budget}>{budget.name}</MenuItem>))}\n                            </Select>\n                        </FormControl>\n                        <Button\n                            onClick={handleAddBudgetDialog}\n                        >Add a budget</Button>\n                        {props.budget\n                        ? <div>                            \n                            {props.budget.name}\n                            <Button\n                                onClick={deleteBudget}\n                            >Delete</Button></div>\n                        : null}\n                    </Grid>\n                    <Grid item>\n                        {props.budget\n                        ? <div><CheckBoxGridList\n                                data={['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday']}\n                                checked={props.budget.working_days}\n                                handleSelect={handleSelect}\n                            /></div>\n                        : null}                        \n                    </Grid>\n                    <Grid item container direction=\"column\">                        \n                        {props.budget\n                        ? <div>\n                            <Grid item container spacing={1} direction=\"column\">\n                                <Grid item container spacing={1}>\n                                    <Grid item>\n                                        To earn: {props.budget.to_earn}\n                                    </Grid>\n                                    <Grid item>\n                                        To save: {props.budget.to_save}\n                                    </Grid>\n                                    <Grid item>\n                                        Net worth: {props.budget.net_worth}\n                                    </Grid>\n                                    <Grid item>\n                                        APY: {props.budget.APY}\n                                    </Grid>\n                                    <Grid item>\n                                        spendable: {props.budget.spendable}\n                                    </Grid>\n                                    <Grid item>\n                                        goal: {props.budget.goal}\n                                    </Grid>\n                                </Grid>\n                                <Grid item container spacing={1}>\n                                    <Grid item>\n                                        Net worth needed: {props.budget.net_worth_needed}\n                                    </Grid>\n                                    <Grid item>\n                                        Net worth missing: {props.budget.net_worth_missing}\n                                    </Grid>\n                                    <Grid item>\n                                        Time: {props.budget.time}\n                                    </Grid>                                    \n                                </Grid>\n                            </Grid>\n                            <Grid item>\n                                <Button\n                                    onClick={handleFixedCostsDialog}\n                                >Fixed Costs {props.budget.tot_fixed_costs}</Button>\n                                <Button\n                                    onClick={handleVariableCostsDialog}\n                                >Variable Costs {props.budget.tot_variable_costs}</Button>\n                                <Button\n                                    onClick={handleFutureCostsDialog}\n                                >Future Costs {props.budget.tot_future_costs}</Button>\n                                <Button\n                                    onClick={handleIncomesDialog}\n                                >Incomes {props.budget.tot_incomes}</Button>\n                                <Button\n                                    onClick={handleBankAccountsDialog}\n                                >Bank accounts {props.budget.tot_bank_accounts}</Button>\n                            </Grid>\n                            </div>\n                        : <div>Select a budget to see details</div>}\n                    </Grid>\n                </Grid></div>)\n            : (<div>Loading . . .</div>)}            \n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}